{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/logon.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction LogonComponent_div_0_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵelement(1, \"img\", 11);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LogonComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"table\", 2)(2, \"tr\")(3, \"th\");\n    i0.ɵɵtext(4, \"Email\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\")(6, \"input\", 3);\n    i0.ɵɵlistener(\"ngModelChange\", function LogonComponent_div_0_Template_input_ngModelChange_6_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.email = $event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(7, \"tr\")(8, \"th\");\n    i0.ɵɵtext(9, \"Password\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\")(11, \"input\", 4);\n    i0.ɵɵlistener(\"ngModelChange\", function LogonComponent_div_0_Template_input_ngModelChange_11_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.password = $event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(12, \"tr\")(13, \"td\", 5)(14, \"button\", 6);\n    i0.ɵɵlistener(\"click\", function LogonComponent_div_0_Template_button_click_14_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.login());\n    });\n    i0.ɵɵtext(15, \"Login\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(16, \"tr\")(17, \"td\", 7);\n    i0.ɵɵlistener(\"click\", function LogonComponent_div_0_Template_td_click_17_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.toggle());\n    });\n    i0.ɵɵtext(18, \"Not Registered yet? Click here\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(19, LogonComponent_div_0_div_19_Template, 2, 0, \"div\", 8);\n    i0.ɵɵelementStart(20, \"div\", 9);\n    i0.ɵɵtext(21);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.email);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.password);\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.status);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.error);\n  }\n}\nfunction LogonComponent_div_1_div_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵelement(1, \"img\", 11);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LogonComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"table\", 2)(2, \"tr\")(3, \"th\");\n    i0.ɵɵtext(4, \"Username\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\")(6, \"input\", 3);\n    i0.ɵɵlistener(\"ngModelChange\", function LogonComponent_div_1_Template_input_ngModelChange_6_listener($event) {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.rusername = $event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(7, \"tr\")(8, \"th\");\n    i0.ɵɵtext(9, \"Password\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\")(11, \"input\", 4);\n    i0.ɵɵlistener(\"ngModelChange\", function LogonComponent_div_1_Template_input_ngModelChange_11_listener($event) {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.rpassword = $event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(12, \"tr\")(13, \"th\");\n    i0.ɵɵtext(14, \"Verify Password\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"td\")(16, \"input\", 4);\n    i0.ɵɵlistener(\"ngModelChange\", function LogonComponent_div_1_Template_input_ngModelChange_16_listener($event) {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.vpassword = $event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(17, \"tr\")(18, \"th\");\n    i0.ɵɵtext(19, \"Email\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"td\")(21, \"input\", 3);\n    i0.ɵɵlistener(\"ngModelChange\", function LogonComponent_div_1_Template_input_ngModelChange_21_listener($event) {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.remail = $event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(22, \"tr\")(23, \"td\", 5)(24, \"button\", 6);\n    i0.ɵɵlistener(\"click\", function LogonComponent_div_1_Template_button_click_24_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.register());\n    });\n    i0.ɵɵtext(25, \"Register\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(26, \"tr\")(27, \"td\", 7);\n    i0.ɵɵlistener(\"click\", function LogonComponent_div_1_Template_td_click_27_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.toggle());\n    });\n    i0.ɵɵtext(28, \"Not Registered yet? Click here\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(29, LogonComponent_div_1_div_29_Template, 2, 0, \"div\", 8);\n    i0.ɵɵelementStart(30, \"div\", 9);\n    i0.ɵɵtext(31);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.rusername);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.rpassword);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.vpassword);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.remail);\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.status);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.rerror);\n  }\n}\nexport let LogonComponent = /*#__PURE__*/(() => {\n  class LogonComponent {\n    constructor(log, route) {\n      this.log = log;\n      this.route = route;\n      this.email = \"\";\n      this.password = \"\";\n      this.status = false;\n      // Register Variables\n      this.rusername = \"\";\n      this.rpassword = \"\";\n      this.vpassword = \"\";\n      this.remail = \"\";\n      this.rstatus = false;\n      // Common variables\n      this.logform = true;\n    }\n    ngOnInit() {}\n    toggle() {\n      this.logform = this.logform ? false : true;\n    }\n    login() {\n      this.error = \"\";\n      if (this.email.length == 0 || this.password.length == 0) this.error = \"Fill all the fields\";else {\n        this.status = true;\n        this.log.login(this.email, this.password).subscribe({\n          next: response => {\n            sessionStorage.setItem(\"username\", response.user.username);\n            sessionStorage.setItem(\"usertype\", response.user.type);\n            sessionStorage.setItem(\"token\", response.accessToken);\n            sessionStorage.setItem(\"email\", response.user.email);\n            this.log.username = response.user.username;\n            this.log.usertype = response.user.type;\n            this.log.token = response.accessToken;\n            this.status = true;\n            if (response.user.type == \"admin\") this.route.navigate(['admin/home']);else this.route.navigate(['user/home']);\n          },\n          error: () => {\n            this.error = \"Invalid Credentials\";\n            this.status = false;\n          }\n        });\n      }\n    }\n    //new User Registration \n    register() {\n      alert(\"Called\");\n      this.rerror = \"\";\n      let emailregex = /^[a-z][a-z0-9_\\.]+@[a-z]{2,5}\\.[a-z]{3,5}$/;\n      if (this.rusername.length == 0 || this.rpassword.length == 0 || this.vpassword.length == 0) this.rerror = \"Fill all the fields\";else if (this.rusername.length < 4) this.rerror = \"Username should be atleast 4 charectars long\";else if (this.rpassword.length < 6) this.rerror = \"password should be atleast 6 charectars long\";else if (this.rpassword != this.vpassword) this.rerror = \"Username and password should match\";else if (!emailregex.test(this.remail)) this.rerror = \"not in email format\";else {\n        this.rstatus = true;\n        this.rstatus = true;\n        let obj = {\n          username: this.rusername,\n          password: this.rpassword,\n          type: \"user\",\n          email: this.remail\n        };\n        this.log.register(obj).subscribe({\n          next: result => {\n            if (result.success == false) alert(\"User already exists\");else {\n              alert(\"User successfully registered\");\n              this.logform = true;\n              this.rstatus = false;\n            }\n          },\n          error: () => {\n            alert(\"There is problem , Please try again or later\");\n            this.rstatus = false;\n          }\n        });\n      }\n    }\n  }\n  LogonComponent.ɵfac = function LogonComponent_Factory(t) {\n    return new (t || LogonComponent)(i0.ɵɵdirectiveInject(i1.LogonService), i0.ɵɵdirectiveInject(i2.Router));\n  };\n  LogonComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LogonComponent,\n    selectors: [[\"app-logon\"]],\n    decls: 2,\n    vars: 2,\n    consts: [[\"id\", \"login-card\", 4, \"ngIf\"], [\"id\", \"login-card\"], [\"id\", \"log-table\"], [\"type\", \"text\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"password\", 3, \"ngModel\", \"ngModelChange\"], [\"colspan\", \"2\", 2, \"text-align\", \"center\"], [3, \"click\"], [\"colspan\", \"2\", 2, \"text-align\", \"center\", \"color\", \"lightgreen\", 3, \"click\"], [\"class\", \"loading\", 4, \"ngIf\"], [1, \"errors\"], [1, \"loading\"], [\"src\", \"../assets/images/loading.gif\"]],\n    template: function LogonComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, LogonComponent_div_0_Template, 22, 4, \"div\", 0);\n        i0.ɵɵtemplate(1, LogonComponent_div_1_Template, 32, 6, \"div\", 0);\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.logform);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.logform);\n      }\n    },\n    dependencies: [i3.NgIf, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel],\n    styles: [\"#login-card[_ngcontent-%COMP%]{height:500px;width:50%;margin-top:40px;margin-left:30%;background-color:#fff;box-shadow:0 2px 10px #d3d3d3;position:relative;border:2px solid black;background-image:url(/assets/images/logon.jpg)}#image-left[_ngcontent-%COMP%]{position:absolute;left:0;top:0;height:30%;width:30%}#image-center[_ngcontent-%COMP%]{position:absolute;left:45%;top:0;height:35%;width:35%}#image-bottom-right[_ngcontent-%COMP%]{position:absolute;right:0%;bottom:0;height:25%;width:25%}#image-bottom-right[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], #image-left[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], #image-bottom-center[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:100%}#log-table[_ngcontent-%COMP%]{position:absolute;top:35%;left:15%}input[type=text][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{height:30px;width:200px}button[_ngcontent-%COMP%]{background-color:#2ecc71;color:#fff;padding:10px;margin:10px;border:none}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{height:50px;width:250px}@media only screen and (max-width: 720px){#login-card[_ngcontent-%COMP%]{width:100%;margin:0}}.loading[_ngcontent-%COMP%], .errors[_ngcontent-%COMP%]{position:absolute;bottom:50px;text-align:center;left:25%;color:green}\"]\n  });\n  return LogonComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}