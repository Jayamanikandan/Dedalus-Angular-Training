{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/logon.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction LogonComponent_div_0_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11);\n    i0.ɵɵelement(1, \"img\", 12);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LogonComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"table\", 2)(2, \"tr\")(3, \"th\", 3);\n    i0.ɵɵtext(4, \"Email\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\")(6, \"input\", 4);\n    i0.ɵɵlistener(\"ngModelChange\", function LogonComponent_div_0_Template_input_ngModelChange_6_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.email = $event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(7, \"tr\")(8, \"th\");\n    i0.ɵɵtext(9, \"Password\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\")(11, \"input\", 5);\n    i0.ɵɵlistener(\"ngModelChange\", function LogonComponent_div_0_Template_input_ngModelChange_11_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.password = $event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(12, \"tr\")(13, \"td\", 6)(14, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function LogonComponent_div_0_Template_button_click_14_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.login());\n    });\n    i0.ɵɵtext(15, \"Login\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(16, \"tr\")(17, \"td\", 8);\n    i0.ɵɵlistener(\"click\", function LogonComponent_div_0_Template_td_click_17_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.toggle());\n    });\n    i0.ɵɵtext(18, \"Not Registered yet? Click here\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(19, LogonComponent_div_0_div_19_Template, 2, 0, \"div\", 9);\n    i0.ɵɵelementStart(20, \"div\", 10);\n    i0.ɵɵtext(21);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.email);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.password);\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.status);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.error);\n  }\n}\nfunction LogonComponent_div_1_div_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11);\n    i0.ɵɵelement(1, \"img\", 12);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LogonComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"table\", 2)(2, \"tr\")(3, \"th\");\n    i0.ɵɵtext(4, \"Username\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\")(6, \"input\", 4);\n    i0.ɵɵlistener(\"ngModelChange\", function LogonComponent_div_1_Template_input_ngModelChange_6_listener($event) {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.rusername = $event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(7, \"tr\")(8, \"th\");\n    i0.ɵɵtext(9, \"Password\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\")(11, \"input\", 5);\n    i0.ɵɵlistener(\"ngModelChange\", function LogonComponent_div_1_Template_input_ngModelChange_11_listener($event) {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.rpassword = $event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(12, \"tr\")(13, \"th\");\n    i0.ɵɵtext(14, \"Verify Password\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"td\")(16, \"input\", 5);\n    i0.ɵɵlistener(\"ngModelChange\", function LogonComponent_div_1_Template_input_ngModelChange_16_listener($event) {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.vpassword = $event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(17, \"tr\")(18, \"th\");\n    i0.ɵɵtext(19, \"Email\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"td\")(21, \"input\", 4);\n    i0.ɵɵlistener(\"ngModelChange\", function LogonComponent_div_1_Template_input_ngModelChange_21_listener($event) {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.remail = $event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(22, \"tr\")(23, \"td\", 6)(24, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function LogonComponent_div_1_Template_button_click_24_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.register());\n    });\n    i0.ɵɵtext(25, \"Register\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(26, \"tr\")(27, \"td\", 8);\n    i0.ɵɵlistener(\"click\", function LogonComponent_div_1_Template_td_click_27_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.toggle());\n    });\n    i0.ɵɵtext(28, \"Not Registered yet? Click here\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(29, LogonComponent_div_1_div_29_Template, 2, 0, \"div\", 9);\n    i0.ɵɵelementStart(30, \"div\", 10);\n    i0.ɵɵtext(31);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.rusername);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.rpassword);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.vpassword);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.remail);\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.status);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.rerror);\n  }\n}\nexport class LogonComponent {\n  constructor(log, route) {\n    this.log = log;\n    this.route = route;\n    this.email = \"\";\n    this.password = \"\";\n    this.status = false;\n    // Register Variables\n    this.rusername = \"\";\n    this.rpassword = \"\";\n    this.vpassword = \"\";\n    this.remail = \"\";\n    this.rstatus = false;\n    // Common variables\n    this.logform = true;\n  }\n  ngOnInit() {}\n  toggle() {\n    this.logform = this.logform ? false : true;\n  }\n  login() {\n    this.error = \"\";\n    if (this.email.length == 0 || this.password.length == 0) this.error = \"Fill all the fields\";else {\n      this.status = true;\n      this.log.login(this.email, this.password).subscribe({\n        next: response => {\n          sessionStorage.setItem(\"username\", response.user.username);\n          sessionStorage.setItem(\"usertype\", response.user.type);\n          sessionStorage.setItem(\"token\", response.accessToken);\n          sessionStorage.setItem(\"email\", response.user.email);\n          this.log.username = response.user.username;\n          this.log.usertype = response.user.type;\n          this.log.token = response.accessToken;\n          this.status = true;\n          if (response.user.type == \"admin\") this.route.navigate(['admin/home']);else this.route.navigate(['user/home']);\n        },\n        error: () => {\n          this.error = \"Invalid Credentials\";\n          this.status = false;\n        }\n      });\n    }\n  }\n  //new User Registration \n  register() {\n    alert(\"Called\");\n    this.rerror = \"\";\n    let emailregex = /^[a-z][a-z0-9_\\.]+@[a-z]{2,5}\\.[a-z]{3,5}$/;\n    if (this.rusername.length == 0 || this.rpassword.length == 0 || this.vpassword.length == 0) this.rerror = \"Fill all the fields\";else if (this.rusername.length < 4) this.rerror = \"Username should be atleast 4 charectars long\";else if (this.rpassword.length < 6) this.rerror = \"password should be atleast 6 charectars long\";else if (this.rpassword != this.vpassword) this.rerror = \"Username and password should match\";else if (!emailregex.test(this.remail)) this.rerror = \"not in email format\";else {\n      this.rstatus = true;\n      this.rstatus = true;\n      let obj = {\n        username: this.rusername,\n        password: this.rpassword,\n        type: \"user\",\n        email: this.remail\n      };\n      this.log.register(obj).subscribe({\n        next: result => {\n          if (result.success == false) alert(\"User already exists\");else {\n            alert(\"User successfully registered\");\n            this.logform = true;\n            this.rstatus = false;\n          }\n        },\n        error: () => {\n          alert(\"There is problem , Please try again or later\");\n          this.rstatus = false;\n        }\n      });\n    }\n  }\n}\nLogonComponent.ɵfac = function LogonComponent_Factory(t) {\n  return new (t || LogonComponent)(i0.ɵɵdirectiveInject(i1.LogonService), i0.ɵɵdirectiveInject(i2.Router));\n};\nLogonComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LogonComponent,\n  selectors: [[\"app-logon\"]],\n  decls: 2,\n  vars: 2,\n  consts: [[\"id\", \"login-card\", 4, \"ngIf\"], [\"id\", \"login-card\"], [\"id\", \"log-table\"], [1, \"label_style\"], [\"type\", \"text\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"password\", 3, \"ngModel\", \"ngModelChange\"], [\"colspan\", \"2\", 2, \"text-align\", \"center\"], [3, \"click\"], [\"colspan\", \"2\", 2, \"text-align\", \"center\", \"color\", \"lightgreen\", 3, \"click\"], [\"class\", \"loading\", 4, \"ngIf\"], [1, \"errors\"], [1, \"loading\"], [\"src\", \"../assets/images/loading.gif\"]],\n  template: function LogonComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, LogonComponent_div_0_Template, 22, 4, \"div\", 0);\n      i0.ɵɵtemplate(1, LogonComponent_div_1_Template, 32, 6, \"div\", 0);\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.logform);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.logform);\n    }\n  },\n  dependencies: [i3.NgIf, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel],\n  styles: [\"var[_ngcontent-%COMP%]   resource[_ngcontent-%COMP%];\\n (()[_ngcontent-%COMP%]   =[_ngcontent-%COMP%] >  { // webpackBootstrap\\n \\tvar __webpack_modules__ = ({\\n\\n 873:\\n\\n (() => {\\n\\nthrow new Error(\\\"Module build failed (from ./node_modules/postcss-loader/dist/cjs.js):\\\\nSyntaxError\\\\n\\\\n(83:5) C:\\\\\\\\D_Drive\\\\\\\\Training\\\\\\\\Angular\\\\\\\\Source\\\\\\\\Angular_Course\\\\\\\\Tasks\\\\\\\\istore\\\\\\\\src\\\\\\\\app\\\\\\\\logon\\\\\\\\logon.component.css Unknown word\\\\n\\\\n \\\\u001b[90m 81 | \\\\u001b[39m\\\\u001b[33m{\\\\u001b[39m\\\\n \\\\u001b[90m 82 | \\\\u001b[39m    color\\\\u001b[33m:\\\\u001b[39mcornsilk\\\\u001b[33m;\\\\u001b[39m\\\\n\\\\u001b[1m\\\\u001b[31m>\\\\u001b[39m\\\\u001b[22m\\\\u001b[90m 83 | \\\\u001b[39m    cont\\\\n \\\\u001b[90m    | \\\\u001b[39m    \\\\u001b[1m\\\\u001b[31m^\\\\u001b[39m\\\\u001b[22m\\\\n \\\\u001b[90m 84 | \\\\u001b[39m\\\\u001b[33m}\\\\u001b[39m\\\\n\\\");\\n\\n })\\n\\n \\t});\\n\\n \\t\\n \\t// startup\\n \\t// Load entry module and return exports\\n \\t// This entry module doesn't tell about it's top-level declarations so it can't be inlined\\n \\tvar __webpack_exports__ = {};\\n \\t__webpack_modules__[873]();\\n \\tresource = __webpack_exports__;\\n \\t\\n })()\\n;\\n/*# sourceMappingURL=logon.component.css.map*/\"]\n});","map":{"version":3,"mappings":"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","names":["i0","LogonComponent","constructor","log","route","ngOnInit","toggle","logform","login","error","email","length","password","status","subscribe","next","response","sessionStorage","setItem","user","username","type","accessToken","usertype","token","navigate","register","alert","rerror","emailregex","rusername","rpassword","vpassword","test","remail","rstatus","obj","result","success","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\D_Drive\\Training\\Angular\\Source\\Angular_Course\\Tasks\\istore\\src\\app\\logon\\logon.component.html","C:\\D_Drive\\Training\\Angular\\Source\\Angular_Course\\Tasks\\istore\\src\\app\\logon\\logon.component.ts"],"sourcesContent":["\n<div id=\"login-card\" *ngIf=\"logform\">    \n    \n        <table id=\"log-table\">\n             <tr>\n                 <th class=\"label_style\">Email</th>\n                 <td><input type=\"text\" [(ngModel)]=\"email\"></td>\n             </tr>\n             <tr>\n                 <th>Password</th>\n                 <td><input type=\"password\" [(ngModel)]=\"password\"></td>\n             </tr>\n             <tr>\n                 \n                 <td colspan=2 \n                     style=\"text-align:center\"><button  (click)=\"login()\">Login</button></td>\n             </tr>\n             <tr>\n                 \n                 <td colspan=2 \n                     style=\"text-align:center; color: lightgreen\" (click)=\"toggle()\">Not Registered yet? Click here</td>\n             </tr>\n        </table>\n        <div class=\"loading\" *ngIf=\"status\"><img src=\"../assets/images/loading.gif\"></div>\n        <div class=\"errors\">{{error}}</div>\n        \n    </div>\n\n\n    <div id=\"login-card\" *ngIf=\"!logform\">        \n            <table id=\"log-table\">\n                 <tr>\n                     <th>Username</th>\n                     <td><input type=\"text\" [(ngModel)]=\"rusername\"></td>\n                 </tr>\n                 <tr>\n                     <th>Password</th>\n                     <td><input type=\"password\" [(ngModel)]=\"rpassword\"></td>\n                 </tr>\n\n                 <tr>\n                    <th>Verify Password</th>\n                    <td><input type=\"password\" [(ngModel)]=\"vpassword\"></td>\n                </tr>\n\n                <tr>\n                    <th>Email</th>\n                    <td> <input type=\"text\" [(ngModel)]=\"remail\"></td>\n                </tr>\n                 <tr>\n                     \n                     <td colspan=2 \n                         style=\"text-align:center\"><button (click)=\"register()\">Register</button></td>\n                 </tr>\n                 <tr>\n                     \n                     <td colspan=2 \n                         style=\"text-align:center; color: lightgreen\" (click)=\"toggle()\">Not Registered yet? Click here</td>\n                 </tr>\n            </table>\n            <div class=\"loading\" *ngIf=\"status\"><img src=\"../assets/images/loading.gif\"></div>\n            <div class=\"errors\">{{rerror}}</div>\n    </div>\n","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { LogonService } from '../services/logon.service';\n\n@Component({\n  selector: 'app-logon',\n  templateUrl: './logon.component.html',\n  styleUrls: ['./logon.component.css']\n})\nexport class LogonComponent {\n\n  email:string=\"\";\n  password:string=\"\";\n  error?:string;\n  status:boolean=false;\n \n  // Register Variables\n \n  rusername:string=\"\";\n  rpassword:string=\"\";\n  vpassword:string=\"\";\n  remail:string=\"\";\n  rerror?:string;\n  rstatus:boolean=false\n \n // Common variables\n \n   logform:boolean=true;\n  constructor(private log:LogonService,private route:Router) { }\n\n  ngOnInit(): void {\n  }\n\n\n  toggle(){\n    this.logform=this.logform?false:true;\n }\n\n login():void{\n   this.error=\"\";\n   if(this.email.length==0 || this.password.length==0)\n   this.error=\"Fill all the fields\";\n   else{\n     this.status=true;\n     this.log.login(this.email,this.password).subscribe(\n        { next:   (response:any)=>{\n            sessionStorage.setItem(\"username\",response.user.username);\n            sessionStorage.setItem(\"usertype\",response.user.type);\n            sessionStorage.setItem(\"token\",response.accessToken);\n            sessionStorage.setItem(\"email\",response.user.email);\n            this.log.username=response.user.username;\n            this.log.usertype=response.user.type;\n            this.log.token=response.accessToken;\n            this.status=true;\n            if(response.user.type==\"admin\")\n                this.route.navigate(['admin/home']);\n            else\n                this.route.navigate(['user/home']);\n          },\n\n          error:()=>{\n            this.error=\"Invalid Credentials\";\n            this.status=false;\n          }}\n     )\n         }\n }\n\n //new User Registration \n\n register():void{\n    alert(\"Called\");\n     this.rerror=\"\";\n     let emailregex:RegExp=/^[a-z][a-z0-9_\\.]+@[a-z]{2,5}\\.[a-z]{3,5}$/\n\n\n     if(this.rusername.length==0 || this.rpassword.length==0 || this.vpassword.length==0 )\n     this.rerror=\"Fill all the fields\";\n\n     else if(this.rusername.length<4)\n     this.rerror=\"Username should be atleast 4 charectars long\"\n\n     else if(this.rpassword.length<6)\n     this.rerror=\"password should be atleast 6 charectars long\"\n\n     else if(this.rpassword!=this.vpassword)\n     this.rerror=\"Username and password should match\"\n     \n     else if(!emailregex.test(this.remail))\n     this.rerror=\"not in email format\"\n\n    \n     else{\n         this.rstatus=true;\n       \n                  this.rstatus=true;\n                  let obj={username:this.rusername,password:this.rpassword,type:\"user\",email: this.remail}\n                  this.log.register(obj).subscribe({\n                    next: (result:any)=>{\n                         if(result.success == false)\n                           alert(\"User already exists\")\n                         else{\n                         alert(\"User successfully registered\");\n                         this.logform=true;\n                         this.rstatus=false;\n                         }\n                     },\n                     error: ()=>{\n                         alert(\"There is problem , Please try again or later\")\n                         this.rstatus=false;\n                     }}\n                  )\n              }\n          \n     }\n \n\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}